% Definições LaTeX para Trabalhos de Conclusão de Curso - SOCIESC - IST

% Equipe de definição:
%    Eduardo da Silva - eduardo@sociesc.org.br
%    Marco Andre Lopes Mendes - marco@sociesc.org.br

% Adaptado pela Aluna Cintia Ghisi -
% Ano/Semestre: (2012/1)

% Correções por Jean Marcel Duvoisin Schmidt <contact@jschmidt.me>
% Ano/Semestre: (2012/2)
%      - chapters e sections em caixa alta
%      - chapters e subsections em negrito
%      - novo modelo para figuras
%      - subsection com a identacao correta
%      - equação na numeracao correta
%      - enumeracao e listas corretamente formatadas
%      - retirado erros e warnings do LaTeX
%      - melhorias menores

% Correções por João Paulo Cercal <jpcercal@gmail.com>
% Ano/Semestre: (2014/1)
%      - subsubsections
%	   - caption size
%      - retirado erros e warnings do LaTeX
%      - melhorias menores

% Correções por Thiago Strutz <strutz.thiago@gmail.com>
% Ano/Semestre: (2015/1)
%		- adicionado quadros
%		- fonte arial 12pt
%		- formatação das referência
%      	- melhorias menores

%%%%%%%%%%%%%%%%%%%%
% TODO list
%      - corrigir a formatacao do comando \cite
%%%%%%%%%%%%%%%%%%%%

% Última alteração: 01/06/2014

% OBS: Não altere esse arquivo. Novas versões podem ser disponibilizadas.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% exemplo de figura
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\begin{figure}[htbp]
%	\centering
%	\caption{Divisões do SNC}
%	\includegraphics[width=.6\textwidth,frame]{figuras/snc.jpg}
%	\label{fig:snc}
%	\centering \\
%	\footnotesize Fonte: \cite{AFH2012}
%\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{ist-modelo-2}[2015/06/01]

% Pacotes geralmente necessários para desenvolvimento do trabalho

\usepackage{makeidx}
\usepackage{enumitem}
\usepackage{mathtools}

\usepackage[left=3cm, right=2cm, top=3cm, bottom=2cm]{geometry}

\makeatletter
\usepackage[brazil]{babel}
% \usepackage[scaled=1.03]{helvet}
\usepackage[scaled]{lib/uarial}
\usepackage[T1]{fontenc}
%\usepackage{pslatex}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage[utf8]{inputenc}
\usepackage{fancyhdr}
%\usepackage[alf,abnt-repeated-author-omit=yes]{abntcite}
%\usepackage[alf,abnt-emphasize=bf]{abntcite}
\usepackage[alf,abnt-emphasize=bf]{abntex2cite}
\usepackage[size=footnotesize,font=bf]{caption}
\usepackage{url}
\usepackage{calc}
\usepackage{indentfirst}
\usepackage{acronym}
\usepackage{listings}
\usepackage{lipsum}
\usepackage{paralist}
\usepackage[export]{adjustbox}
\usepackage[section]{placeins}
\usepackage{color}
\usepackage{float}
\usepackage{array}
\usepackage{trivfloat}
\newcolumntype{R}[1]{>{\raggedleft\arraybackslash}m{#1}}
\newcolumntype{L}[1]{>{\raggedright\arraybackslash}m{#1}}
\newcolumntype{C}[1]{>{\centering\arraybackslash}m{#1}}

\makeindex
\makeglossary

%Usando Arial Tanto para Texto Quanto para Titulo
\renewcommand{\rmdefault}{phv}\renewcommand{\sfdefault}{phv}
\renewcommand{\familydefault}{\sfdefault}
\normalfont

%LInha sob a assinatura da banca
\setlength{\ABNTsignthickness}{0.4pt}

% Linhas orfans e viuvas
\clubpenalty=10000
\widowpenalty=10000
\displaywidowpenalty=10000

%% Comando auxiliar para montagem da lista de figuras
\newcommand{\figfillnum}[1]{
  {\hspace{1em}\normalfont\dotfill}\nobreak
  \hb@xt@\@pnumwidth{\hfil\normalfont #1}{}\par}

% Altera a forma de montagem de lista de figuras
\renewcommand*{\l@figure}[2]{
	\leftskip 3.35em
	\rightskip 1.6em
	\parfillskip - \rightskip
	\parindent 0.5em
	\textbf{$-$}
	\parindent 1.0em
	\@tempdima 2.0em
	\advance
	\leftskip
	\@tempdima
	\nobreak
	\hskip -
	\leftskip
	{Figura \normalfont #1}\nobreak \figfillnum{#2}}

%Cria um comando auxiliar para montagem da lista de tabelas
\newcommand{\tabfillnum}[1]{
  {\hspace{1em}\normalfont\dotfill}\nobreak
  \hb@xt@\@pnumwidth{\hfil\normalfont #1}{}\par}

% Altera a forma de montagem de lista de tabelas
\renewcommand*{\l@table}[2]{
	\leftskip 3.5em
	\rightskip 1.6em
	\parfillskip -\rightskip
	\parindent 0.5em
	\textbf{$-$}
	\parindent 1.0em
	\@tempdima 2.0em
	\advance
	\leftskip
	\@tempdima
	\nobreak
	\hskip -
	\leftskip
	{Tabela \normalfont #1} \tabfillnum{#2}}

% Define ambiente e lista de Quadros


\floatstyle{plaintop}
\newfloat{quadro}{htpb}{loq}
\floatname{quadro}{Quadro}

\newcommand{\listquadrosname}{Lista de Quadros}
\newcommand\listofquadros{%
	\ifthenelse{\boolean{@twocolumn}}%
	{\setboolean{ABNTrestorecol}{true}\onecolumn}%
	{\setboolean{ABNTrestorecol}{false}}%
	\ifthenelse{\boolean{ABNThypertoc}}{\renewcommand{\chaptertype}{listofquadros.}}{}
	\pretextualchapter{\listquadrosname}
	\ifthenelse{\boolean{ABNThypertoc}}{\renewcommand{\chaptertype}{}}{}
	\@starttoc{loq}%
	\ifthenelse{\boolean{ABNTrestorecol}}{\twocolumn}{}%
}%

\let\listadequadros\listofquadros\relax

\newcommand{\quadfillnum}[1]{
	{\hspace{1em}\normalfont\dotfill}\nobreak
	\hb@xt@\@pnumwidth{\hfil\normalfont #1}{}\par}

\newcommand{\l@quadro}[2]{
	\leftskip 3.5em
	\rightskip 1.6em
	\parfillskip -\rightskip
	\parindent 0.5em
	\textbf{$-$}
	\parindent 1.0em
	\@tempdima 2.0em
	\advance
	\leftskip
	\@tempdima
	\nobreak
	\hskip -
	\leftskip
	{Quadro \normalfont #1} \quadfillnum{#2}}

% enables numbering of subsubsections.
\setcounter{secnumdepth}{3}

% includes subsubsections in the table of contents.
\setcounter{tocdepth}{3}

% Formato do índice
\renewcommand*\l@chapter[2]{
  \ifnum \c@tocdepth >\m@ne
    \addpenalty{-\@highpenalty}
    \setlength\@tempdima{1em}
    \begingroup
     \parindent \z@ \rightskip \@pnumwidth
     \parfillskip -\@pnumwidth
     \leavevmode \bfseries
     \advance\leftskip\@tempdima
     \hskip -\leftskip
     \uppercase{#1}\nobreak\
      \leaders\hbox{$\m@th
       \mkern \@dotsep mu\hbox{.}\mkern \@dotsep
       mu$}\hfil\nobreak\hb@xt@\@pnumwidth{\hss #2}\par
     \penalty\@highpenalty

   \endgroup
 \fi}
\renewcommand*\l@section[2]{
 \ifnum \c@tocdepth >\m@ne
   \addpenalty{-\@highpenalty}
   \setlength\@tempdima{2em}
   \begingroup
     \parindent \z@ \rightskip \@pnumwidth
     \parfillskip -\@pnumwidth
     \leavevmode \normalfont
     \advance\leftskip\@tempdima
     \hskip -\leftskip
     \uppercase{#1}\nobreak\
      \leaders\hbox{$\m@th
       \mkern \@dotsep mu\hbox{.}\mkern \@dotsep
       mu$}\hfil\nobreak\hb@xt@\@pnumwidth{\hss #2}\par
     \penalty\@highpenalty
   \endgroup
\fi}
\renewcommand*\l@subsection[2]{
 \ifnum \c@tocdepth >\m@ne
   \addpenalty{-\@highpenalty}
   \setlength\@tempdima{3em}
   \begingroup
     \parindent \z@ \rightskip \@pnumwidth
     \parfillskip -\@pnumwidth
     \leavevmode \bfseries
     \advance\leftskip\@tempdima
     \hskip -\leftskip
     #1\nobreak\
      \leaders\hbox{$\m@th
       \mkern \@dotsep mu\hbox{.}\mkern \@dotsep
       mu$}\hfil\nobreak\hb@xt@\@pnumwidth{\hss #2}\par
     \penalty\@highpenalty
   \endgroup
\fi}
\renewcommand*\l@subsubsection[2]{
 \ifnum \c@tocdepth >\m@ne
   \addpenalty{-\@highpenalty}
   \setlength\@tempdima{4em}
   \begingroup
     \parindent \z@ \rightskip \@pnumwidth
     \parfillskip -\@pnumwidth
     \leavevmode \normalfont
     \advance\leftskip\@tempdima
     \hskip -\leftskip
     #1\nobreak\
      \leaders\hbox{$\m@th
       \mkern \@dotsep mu\hbox{.}\mkern \@dotsep
       mu$}\hfil\nobreak\hb@xt@\@pnumwidth{\hss #2}\par
     \penalty\@highpenalty
   \endgroup
\fi}

% Formatar capitulos numerados
\def\@makechapterhead#1{
  {\noindent\textbf{\textsf{
 {\thechapter\hspace{.1cm}}\MakeUppercase{#1}}}
    \vspace*{0.62cm}\par
  }}

% Formatar capitulos nao numerados
\def\@makeschapterhead#1{
\begin{center}
  {\noindent\centering\textbf{\textsf{
   \MakeUppercase{#1}
    }}}
\end{center}
  \par}

% Formatar Secao e subsecao numerados
\renewcommand\section{\@startsection {section}{1}{\z@}
                                   {-3.5ex \@plus -1ex \@minus -.2ex}
                                   { 2.3ex \@plus .1ex}
                                   {\normalfont\normalsize\MakeUppercase}
                                   }
\renewcommand\subsection{\@startsection{subsection}{2}{-6mm}
                                   {-3.5ex \@plus -1ex \@minus -.2ex}
                                   {2.3ex  \@plus .1ex}
                                   {\normalfont\normalsize\textbf}
                                   }
\renewcommand\subsubsection{\@startsection{subsubsection}
                                   {3}
				   {\z@}
                                   {-3.5ex \@plus -1ex \@minus -.2ex}
                                   {2.3ex  \@plus .1ex}
                                   {\normalfont\normalsize}
				   }

% Formatar Anexo
\renewcommand{\annex}[1]{\textbf{\MakeUppercase{#1}}
	\setcounter{chapter}{0}
	\resetsubcounters{chapter}
	\gdef\thechapter{\Alph{chapter}}
	\setchaptertype{annex}
	\gdef\@chapapp{Anexo}
	\renewcommand{\anapchaptername}{\annexname}
	\global\let\@chapter\@anapchapter

    }



\newcommand{\outrosPreTextuais}{

% Dedicatória
	\clearpage\thispagestyle{empty}
	\vspace*{14cm}
	%\begin{singlespace}
		\begin{flushright}
			%\begin{minipage}[r]{0.70\columnwidth}
				\fraseDedicatoria
			%\end{minipage}
		\end{flushright}
	%\end{singlespace}
% FIM - Dedicatória

% Agradecimentos
\clearpage\thispagestyle{empty}
\begin{center}
	\textsc{\textbf{{\textsf{AGRADECIMENTOS}}}}
	\par\vfill
	%\vspace*{2cm} % mudei este tamanho
	%\begin{singlespace}
		%\begin{flushright}
			%\begin{minipage}[r]{\columnwidth} % mudei este tamanho
				\fraseAgradecimento
			%\end{minipage}
		%\end{flushright}
	%\end{singlespace}
	\par\vfill
\end{center}
% FIM - Agradecimentos

% Citaçao
\clearpage\thispagestyle{empty}
\vspace*{12cm}
\begin{flushright}
	\begin{minipage}[]{0.66\columnwidth}
		\fraseCitacao
		\begin{flushright}
			\autorFraseCitacao
		\end{flushright}
	\end{minipage}
\end{flushright}
% FIM - Citaçao
}

\expandafter
 \adddialect\csname l@\CurrentOption\endcsname\l@brazil
\@namedef{captions\CurrentOption}{
	\def\contentsname{SUM\'ARIO}
}

\newcommand{\indices}{
	\pagestyle{empty}
	\listoffigures
	\listoftables
	\listofquadros
	\chapter*{Lista de Abreviaturas e Siglas}
	\begin{acronym}
		\input{conteudo/abreviaturas}
	\end{acronym}

	\tableofcontents
	\pagestyle{fancy}
}

%%% Traça um quadro cercando um ou mais parágrafos.
\newlength{\squareboxwidth}
\newenvironment{squarebox}{%
  \setlength{\squareboxwidth}{\linewidth}
  \addtolength{\squareboxwidth}{-12pt}
  \begin{center}
    \begin{tabular}{|c|}
      \hline
      \begin{minipage}{\squareboxwidth}
        \medskip
}
{
  \medskip
\end{minipage}
\\ \hline
\end{tabular}
\end{center}
    \vspace{-0.7cm}
}

\lstset{
    numbers=left,
    stepnumber=1,
    firstnumber=auto,
    numberstyle=\small,
    numberfirstline=true,
    numberblanklines=false,
    inputencoding=latin1,
    extendedchars=true,
    breaklines=true,
    frame=none,
    basicstyle=\footnotesize,
    stringstyle=\ttfamily,
    showstringspaces=false,
    xleftmargin=10mm,
    numbersep=7mm
}

% Define a capa
\renewcommand{\capa}{
\begin{titlepage}
\begin{center}
\textsc{\textsf{\textbf{\universidade}\\{\textbf{\faculdade}}}}
\par\vspace*{4cm}
\textbf{\textsf{\@author}}
\par\vspace*{4cm}
\par\bigskip\normalfont
\textsf{\textbf{\title}}
\par\vfill
\textbf{\textsf{\cidade\\\ano/\semestre}}
\end{center}
\end{titlepage}
}
% fim da capa

% Folha de rosto
\renewcommand{\folhaderosto}{
	\clearpage\thispagestyle{empty}
	\begin{center}
		\textbf{\textsf{\@author}}
		\par\bigskip\normalfont
		%\vspace*{2cm}
		\par\vfill
		\textsf{\textbf{\title}}
		\par\vspace*{3cm}
	\end{center}
	\begin{singlespace}
		\begin{flushright}
			\begin{minipage}[r]{0.55\columnwidth}
				\textbf{\fraseFolhaRosto}
			\end{minipage}
		\end{flushright}
	\end{singlespace}

	\begin{center}
		\par\vspace*{3cm}
		\par\bigskip\normalfont
		\textsf{\textbf{Orientador: \ABNTorientadordata}}
		\par\vfill
		\textbf{\textsf{\cidade\\\ano/\semestre}}
	\end{center}

}

% Folha de Aprovacao
\newcommand{\aprovacao}{
	\clearpage\thispagestyle{empty}
	\begin{center}
		\textbf{\textsf{\@author}}
		\par\bigskip\normalfont
		\par\vspace*{2cm}
		\par\textsf{\textbf{\title}}
		\par\vspace*{2cm}
	\end{center}
	\begin{singlespace}
		\begin{flushright}
			\begin{minipage}[r]{0.55\columnwidth}
				\textbf{\fraseAprovacao}
			\end{minipage}
		\end{flushright}
	\end{singlespace}

	\par\bigskip\normalfont
	\vspace*{3cm}

	\begin{flushleft}
		\textbf{\textsf{\cidade, \today.}}
	\end{flushleft}

	\par\bigskip\normalfont

	\par\vfill

	\begin{singlespace}
	\begin{minipage}[c]{1\columnwidth}
		\begin{center}

		%\begin{displaymath}
			\rule{8.3cm}{.1mm}
			\par\vspace*{0.1cm}
			\textbf{\membroBancaA}
		%\end{displaymath}

		\par\vspace*{1.5cm}

		%\begin{displaymath}
			\rule{8.3cm}{.1mm}
			\par\vspace*{0.01cm}
			\textbf{\membroBancaB}
		%\end{displaymath}

		\par\vspace*{1.5cm}

		%\begin{displaymath}
			\rule{8.3cm}{.1mm}
			\par\vspace*{0.1cm}
			\textbf{\membroBancaC}
		%\end{displaymath}

		\end{center}
	\end{minipage}
	\end{singlespace}
}

\def\resumoname{RESUMO}
\def\ABNTabstractname{ABSTRACT}

%Adicionar Anexos ao trabalho
\newcommand{\Anexos}{
	\IfFileExists{anexos.tex}{
		\clearpage\thispagestyle{empty}
		\input{conteudo/anexos.tex}
		}
	}
\setlength{\parskip}{.0cm}
\linespread{1}

% Recuo de paragrafo em 1.25cm
\setlength{\parindent}{1.25cm}

% Formato de enumerador
\def\@enumerate{
  \itemsep 1pt
  \parskip 0pt
  \parsep 0pt
  \parindent 2cm
}


\renewcommand{\theenumi}{\alph{enumi}}
\endinput
